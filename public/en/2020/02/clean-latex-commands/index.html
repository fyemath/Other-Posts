<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Clean LaTeX Commands For R Bookdown | </title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/customized.css"/>
  </head>

  

  <body class="en">
    <nav>
    <ul class="menu">
    
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/en/">Blog</a></li>
      
      <li><a href="/en/categories/">Categories</a></li>
      
      <li><a href="/en/tags/">Tags</a></li>
      
      <li><a href="/cn/">中文</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Clean LaTeX Commands For R Bookdown</span></h1>

<h2 class="author">

    Fei Ye

</h2>
<h2 class="date">2020/02/27</h2>
</div>

<main>
<p>When using LaTeX template with customized theorem environments in R bookdown, you may see an error say a thereom environment is defined. Checking the output LaTex files, you will find that bookdown generated theorem enviroment at the end of the LaTeX preamble. To solve the problem, currently, one may use the magical <code>bookdown.post.latex</code> option. Adding the following code at the beginning of the index.Rmd file will remove the injected theorem environments.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">```{r remove_amsmath, include=FALSE}
options(bookdown.post.latex = function(x) {
    start_row &lt;- grep(&#34;package\\{amsthm&#34;, x)
    end_row &lt;- grep(&#34;newtheorem\\*\\{solution&#34;, x)
    x&lt;-x[-c(start_row:end_row)]
})
```
</code></pre></div><p>I learned the option from the source file of Yihui&rsquo;s book <a href="https://bookdown.org/yihui/rmarkdown-cookbook/">R Markdown Cookbook</a> and the codes from the Github issue <a href="https://github.com/rstudio/bookdown/issues/417">pdf_book is trying inject latex code to use package amsthm #417</a>.</p>

</main>

  <footer>
  <script src="//yihui.name/js/math-code.js"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.0.0/es5/latest?tex-mml-chtml.js">
</script>
<script>
    MathJax = {
        tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    }
</script>
<script async src="//yihui.name/js/center-img.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>

<script>
hljs.configure({languages: ["r","yaml","toml","tex","markdown"]});
</script>

<script src="/js/check-for-tex.js" defer></script>
  
  <hr/>
  © <a href="https://yfei.page">Fei Ye</a> 2019-now | <a href="https://github.com/fyemath">Github</a>
  
  </footer>
  </body>
</html>

