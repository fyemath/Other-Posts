<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Clean LaTeX Commands For R Bookdown | </title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link href="/css/customized.css" type="text/css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
<script src="/js/thm-numbering.js"></script>
<script src="/js/article-meta-height.js"></script>

<link href="/css/prism-okaidia.css" type="text/css" rel="stylesheet"/>

<link href="/css/fonts-en-cn.css" type="text/css" rel="stylesheet"/>

<link href="/css/css-doodle.css" type="text/css" rel="stylesheet"/>

<script src="https://unpkg.com/css-doodle@0.13.2/css-doodle.min.js"></script>











<script>
  $(':root').css('--header-height', '0 px');

  $(document).ready(divHeight);
  $(window).on('resize', divHeight);

  function divHeight() {
    var dheight = $(".header h1").outerHeight(true)  + "px";
    document.documentElement.style.setProperty('--header-height', dheight);
  }
</script>

  </head>

  

  <body class="en">
    <nav>
    <ul class="menu">
    
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/en/">Blog</a></li>
      
      <li><a href="/en/categories/">Categories</a></li>
      
      <li><a href="/en/tags/">Tags</a></li>
      
      <li><a href="/cn/">中文</a></li>
      
    </ul>
    <hr/>
    </nav>


<div class="article-title">
  <css-doodle use="var(--rule)" as-bg="" click-to-update=""></css-doodle>
  <div class="article-meta">
    <h1><span class="title">Clean LaTeX Commands For R Bookdown</span></h1>
    <h2 class="author">
    
        Fei Ye
    
    </h2>
    <h2 class="date">2020/02/27</h2>
  </div>
</div>

<main>
<p>When using LaTeX template with customized theorem environments in R bookdown, you may see an error say a thereom environment is defined. Checking the output LaTex files, you will find that bookdown generated theorem enviroment at the end of the LaTeX preamble. To solve the problem, currently, one may use the magical <code>bookdown.post.latex</code> option. Adding the following code at the beginning of the index.Rmd file will remove the injected theorem environments.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">```{r remove_amsmath, include=FALSE}
options(bookdown.post.latex = function(x) {
    start_row &lt;- grep(&#34;package\\{amsthm&#34;, x)
    end_row &lt;- grep(&#34;newtheorem\\*\\{solution&#34;, x)
    x&lt;-x[-c(start_row:end_row)]
})
```
</code></pre></div><p>I learned the option from the source file of Yihui&rsquo;s book <a href="https://bookdown.org/yihui/rmarkdown-cookbook/">R Markdown Cookbook</a> and the codes from the Github issue <a href="https://github.com/rstudio/bookdown/issues/417">pdf_book is trying inject latex code to use package amsthm #417</a>.</p>

</main>

<section class="comments">
  <script src="https://utteranc.es/client.js"
  repo="fyemath/Other-blogs-comments"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async>
</script>
</section>

  <footer>
  


<script src="/js/check-for-tex.js" defer></script>
<script async src="https://yihui.org/js/center-img.js"></script>
<script src="/js/prism.js"></script>







  
  <hr>
  © <a href="https://yfei.page">Fei Ye</a> 2019-now | <a href="https://github.com/fyemath">Github</a>
  
  </footer>
  </body>
</html>

