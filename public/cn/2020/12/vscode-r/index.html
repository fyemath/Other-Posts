<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>在 VS Code 中使用 R 的几个技巧 | </title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link href="/css/customized.css" type="text/css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
<script src="/js/thm-numbering.js"></script>
<script src="/js/article-meta-height.js"></script>

<link href="/css/prism-okaidia.css" type="text/css" rel="stylesheet"/>

<link href="/css/fonts-en-cn.css" type="text/css" rel="stylesheet"/>

<link href="/css/css-doodle.css" type="text/css" rel="stylesheet"/>

<script src="https://unpkg.com/css-doodle@0.13.2/css-doodle.min.js"></script>











<script>
  :root {
    --header-height: 0px;
  }
</script>

<script>
  $(document).ready(divHeight);
  $(window).on('resize', divHeight);

  function divHeight() {
    var height = $(".header h1").outerHeight(true)  + "px";
    document.documentElement.style.setProperty('--header-height', height);
  }
</script>

  </head>

  

  <body class="cn">
    <nav>
    <ul class="menu">
    
      
      <li><a href="/">首页</a></li>
      
      <li><a href="/cn/">博客</a></li>
      
      <li><a href="/cn/ctags/">标签</a></li>
      
      <li><a href="/en/">English</a></li>
      
    </ul>
    <hr/>
    </nav>


<div class="article-title">
  <css-doodle use="var(--rule)" as-bg="" click-to-update=""></css-doodle>
  <div class="article-meta">
    <h1><span class="title">在 VS Code 中使用 R 的几个技巧</span></h1>
    <h2 class="author">
    
        Fei Ye
    
    </h2>
    <h2 class="date">2020/12/31</h2>
  </div>
</div>

<main>
<p>与 Rstudio 相比，VS Code 提供了更便捷有效的编辑环境。对于经常写 markdown 或者 Rmarkdown 温度的人来说，VS Code 应该是个更好的选择。而要将 markdown，尤其是 Rmarkdown 生成为各种文档，通常要用一些R包来实现。幸运的是，随着 VS Code 和 R 越来约流行，更多更好用的工具也随之出现。</p>
<h2 id="工具">工具</h2>
<p>假设 R 语言已经安装好，并且在系统路径中可以找到它。要将 VS Code 配置成一个有效的 R 开发工具，我们还需要几个工具。这些工具的安装照官网进性即可。</p>
<h3 id="vs-code-插件">VS Code 插件</h3>
<ul>
<li>
<p><a href="https://marketplace.visualstudio.com/items?itemName=Ikuyadeu.r">vscode-R</a>: 提供语法高亮，代码编译等功能。</p>
</li>
<li>
<p><a href="https://marketplace.visualstudio.com/items?itemName=REditorSupport.r-lsp">vscode-r-lsp</a>: VSCode 和 R Language Server 的通讯工具。</p>
</li>
</ul>
<h3 id="r-包languageserver">R 包：languageserver</h3>
<p><a href="https://github.com/REditorSupport/languageserver">languageserver</a> 是一个针对 Language Server Protocol 的 R 包,支持第三方 R 包相关的自动补全，高亮等。</p>
<h3 id="r-终端radian">R 终端：Radian</h3>
<p><a href="https://github.com/randy3k/radian">radian</a>是由Python语言写成的更加方便快捷的R终端。建议使用它作为处理 R 的终端。</p>
<h2 id="配置">配置</h2>
<p>该节始终以 Windows 系统为例。</p>
<ul>
<li>
<p>设置 R 插件的 R 语言的路径。</p>
<p>安装 R 语言时如果选择默认选项，那么 R 语言会被写入到注册表，从而系统会自动搜索到。R 插件默认会使用系统提供的 R 语言路径。所以，如果不想用 Radian 作为 R 终端，那么这一步设置可以略过。</p>
<p>如要使用 Radian 作为 R 终端，可以在 VS Code 中打开设置(快捷键 <code>Ctrl+,</code>)。在扩展(Extensions)中先找到 R 再找到 RTerm:Windows, 然后将 Radian 的路径添加到其中即可。可参见下图。</p>
<p><img src="/img/RTermWin.png" alt=""></p>
</li>
<li>
<p>设置 R LSP 插件的 R 语言的路径。</p>
<p>R LSP 所使用的 R 语言路径必须时 R 语言本身的路径。设置方法同上。可参见下图。</p>
<p><img src="/img/RLSP-Path.png" alt=""></p>
</li>
</ul>
<h2 id="使用技巧">使用技巧</h2>
<h3 id="r-包的安装位置">R 包的安装位置</h3>
<p>R 包的默认安装路径可能需要管理员权限。为了避免这个问题，也为了在安装新版本是不用再重新安装 R 包，最后的办法是把 R 包放在一个不需要管理员权限，且易于管理的文件夹。例如 <code>~/RLibary</code>。为此，可以利用下面的命令对 R 做一点设置：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">.libPaths</span>( <span style="color:#a6e22e">c</span>( <span style="color:#e6db74">&#34;~/RLibary&#34;</span> , <span style="color:#a6e22e">.libPaths</span>() ) )
</code></pre></div><p>该命令会将自定义的 R 包路径 <code>~/RLibary</code> 添加到原有的 R 包路径列表中。且 <code>&quot;~/RLibary&quot;</code> 在前面，意味着该路径为新安装 R 包时的首选路径。</p>
<h3 id="快捷键设置">快捷键设置</h3>
<p>VS Code 的提供了定义快捷键的功能，且能方便的找到文件及文件夹的路径。当处理 Rmarkdown 文档，Bookdown 书籍，Blogdown 博客时，可以先设置好一些快捷键例如。</p>
<p>首先在 VS Code 中打开快捷键设置页面(快捷键：Ctrl+K Ctrl+S)。点击右上角的图标打开 JSON 文件。然后将下面代码添加进去即可。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;rmarkdown render&#34;</span>,
  <span style="color:#f92672">&#34;key&#34;</span>: <span style="color:#e6db74">&#34;ctrl+alt+i&#34;</span>,
  <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;r.runCommandWithEditorPath&#34;</span>,
  <span style="color:#f92672">&#34;when&#34;</span>: <span style="color:#e6db74">&#34;editorTextFocus&#34;</span>,
  <span style="color:#f92672">&#34;args&#34;</span>: <span style="color:#e6db74">&#34;rmarkdown::render(\&#34;$$\&#34;, clean = TRUE)&#34;</span>
}<span style="color:#960050;background-color:#1e0010">,</span>
{
  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;bookdown to html&#34;</span>,
  <span style="color:#f92672">&#34;key&#34;</span>: <span style="color:#e6db74">&#34;ctrl+alt+u&#34;</span>,
  <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;r.runCommandWithEditorPath&#34;</span>,
  <span style="color:#f92672">&#34;when&#34;</span>: <span style="color:#e6db74">&#34;editorTextFocus&#34;</span>,
  <span style="color:#f92672">&#34;args&#34;</span>: <span style="color:#e6db74">&#34;bookdown::render_book(\&#34;$$\&#34;)&#34;</span>
}<span style="color:#960050;background-color:#1e0010">,</span>
  {
  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;blogdown&#34;</span>,
  <span style="color:#f92672">&#34;key&#34;</span>: <span style="color:#e6db74">&#34;ctrl+alt+y&#34;</span>,
  <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;r.runCommand&#34;</span>,
  <span style="color:#f92672">&#34;when&#34;</span>: <span style="color:#e6db74">&#34;editorTextFocus&#34;</span>,
  <span style="color:#f92672">&#34;args&#34;</span>: <span style="color:#e6db74">&#34;blogdown::serve_site()&#34;</span>
}
</code></pre></div><p><strong>注意事项 1：</strong> 对于 blogdown 和 bookdown，由于编译时文件需要关联起来处理，因此要在 VS Code 中打开 R 项目的根目录文件夹 (快捷键：Ctrl+K Ctrl+O)。然后再利用快捷键运行命令。</p>
<p><strong>注意事项 2：</strong> 如果上面的快捷键跟电脑上的其它软件有冲突，则应做相应的修改。</p>

</main>

<section class="comments">
  <script src="https://utteranc.es/client.js"
  repo="fyemath/Other-blogs-comments"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async>
</script>
</section>

  <footer>
  


<script src="/js/check-for-tex.js" defer></script>

<script async src="https://yihui.org/js/center-img.js"></script>

<script src="/js/prism.js"></script>







  
  <hr/>
  © <a href="https://yfei.page">Fei Ye</a> 2019-now | <a href="https://github.com/fyemath">Github</a>
  
  </footer>
  </body>
</html>

